list(dfm[1:4,],dfm[5:8,])
)
mls
df[c(1:2,5:8),]
df_polm <- as.matrix(df_pol,2:3)
#|echo: true
#|eval: true
df_pol <- df[c(1:2,5:8),]
df_polm <- as.matrix(df_pol,2:3)
df_polm <- as.matrix(df_pol[,2:3])
df_polm <- as.matrix(df_pol[,2:3])
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
pol
plot(pol)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38911,-33.38991,-33.38959),
longitud = c(-70.63566,-70.63531,-70.63500,-70,63468)
)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38911,-33.38991,-33.38959),
longitud = c(-70.63566,-70.63531,-70.63500,-70.63468)
)
df_polm <- as.matrix(df_pol)
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
class(pol)
plot(pol)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38991,-33.38911,-33.38959),
longitud = c(-70.63566,-70.63500,-70.63531,-70.63468)
)
df_polm <- as.matrix(df_pol)
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
class(pol)
plot(pol)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38911,-33.38991,-33.38959),
longitud = c(-70.63566,-70.63531,-70.63500,-70.63468)
)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38911,-33.38991,-33.38959),
longitud = c(-70.63566,-70.63531,-70.63500,-70.63468)
)
```{r}
df_polm <- as.matrix(df_pol)
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
class(pol)
plot(pol)
df_polm <- as.matrix(df_pol)
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
class(pol)
plot(pol)
#|echo: true
#|eval: true
df_pol <- data.frame(
latitud = c(-33.38943,-33.38911,-33.38959,-33.38991),
longitud = c(-70.63566,-70.63531,-70.63468,-70.63500)
)
par(mfrow = c(1,1))
df_polm <- as.matrix(df_pol)
# polygon
pol <- st_polygon(
list(
rbind(df_polm,df_polm[1,]))
)
class(pol)
plot(pol)
df_mpolm <- as.matrix(df_mpol[,2:3])
df_mpol <- data.frame(
poligono = c(rep('poligono_1',4),rep('poligono_2',4)),
latitud = c(-33.38943,-33.38911,-33.38959,-33.38991,
-33.38883,-33.38846,-33.38893,-33.38929),
longitud = c(-70.63566,-70.63531,-70.63468,-70.63500,
-70.63500,-70.63461,-70.63396,-70.63435)
)
df_mpolm <- as.matrix(df_mpol[,2:3])
mp <- st_multipolygon(
list(
list(
rbind(df_mpolm[1:4,],df_mpolm[1,])),
list(
rbind(df_mpolm[5:8,],df_mpolm[8,])
)
)
)
rbind(df_mpolm[1:4,],df_mpolm[1,]))
rbind(df_mpolm[1:4,],df_mpolm[1,])
rbind(df_mpolm[5:8,],df_mpolm[8,])
mp <- st_multipolygon(
list(
list(
rbind(df_mpolm[1:4,],df_mpolm[1,])
),
list(
rbind(df_mpolm[5:8,],df_mpolm[5,])
)
)
)
df_mpol <- data.frame(
poligono = c(rep('poligono_1',4),rep('poligono_2',4)),
latitud = c(-33.38943,-33.38911,-33.38959,-33.38991,
-33.38883,-33.38846,-33.38893,-33.38929),
longitud = c(-70.63566,-70.63531,-70.63468,-70.63500,
-70.63500,-70.63461,-70.63396,-70.63435)
)
df_mpolm <- as.matrix(df_mpol[,2:3])
mp <- st_multipolygon(
list(
list(
rbind(df_mpolm[1:4,],df_mpolm[1,])
),
list(
rbind(df_mpolm[5:8,],df_mpolm[5,])
)
)
)
class(mp)
plot(mp)
plot(gc)
plot(gc)
gc <- st_geometrycollection(list(mpt,ls,mls,pol,mp))
class(gc)
plot(gc)
?st_as_sf
library(agrometR)
estaciones_agromet
library(tidyverse)
estaciones_agromet |> filter(region == 'Metropolitana')
estaciones_agromet |> filter(region == 'Metropolitana') |> put()
?put
estaciones_agromet |> filter(region == 'Metropolitana') |> silce(10'')
estaciones_agromet |> filter(region == 'Metropolitana') |> silce(1:10)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> PUT()
?PUT
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> dput()
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> select(latitud,longitud) |> dput()
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> pull(nombre_ema)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> pull(nombre_ema) |> dput()
df <- data.frame(
latitud = c(-33.70, -33.07, -33.12,-33.67, -33.70, -33.65, -33.67, -33.66, -33.86, -33.21),
longitud = c(-71.37, -70.75, -70.83, -70.58, -70.70, -71.1, -70.92, -70.76, -70.63, -70.71)
)
df
st_as_sf(df,coords = c('longitud','latitud'))
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> pull(nombre_ema)
estaciones_agromet |> filter(region == 'Metropolitana') |> slice(1:10) |> pull(nombre_ema) |> dput()
list.files('/home/francisco/Documentos/IMSE1017/Taller4/Aire_-_Shapefile/')
list.files('/home/francisco/Documentos/IMSE1017/Taller4/Aire_-_Shapefile/',pattern='shp$')
list.files('/home/francisco/Documentos/IMSE1017/Taller4/Aire_-_Shapefile/',pattern='shp$',full.names = TRUE)
files <- list.files('/home/francisco/Documentos/IMSE1017/Taller4/Aire_-_Shapefile/',pattern='shp$',full.names = TRUE)
read_sf(files[1])
files[1]
read_sf(files[1])
citation('sf')
print(citation('sf'),bibtex=TRUE)
citation('terra')
sessionInfo()
citation()
s1 <-data.frame(
a単o =c(10,20,30,40,50,60),
mes =c(01,02,03,04,05,06),
hora =c(13,14,15,16,17,18))
s1 <-s1[,!names(s1) %in% "a単o"]
s1
u1 <- data.frame(A = c(NA,6,9,3),
B = c(NA,9,9,NA),
C = c(6,NA,6,9))
u1
u1[is.na(u1)] <- 3
u1
i1 <-data.frame(
edad = c(10,20,30),
kg = c (35, 65, 85))
i1$a単os <- i1$edad
i1$peso <- i1$kg
i1 <- i1 [, c("a単os", "peso")]
i1
df<- iris [1:5,1:5]
df
30/60
rast(ymax=-17.5,ymin=-56.5, xmax = -68,-76)
library(terra)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,-76)
?rast
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=1000)
rast0.08/0.039
0.08/0.039
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=200)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=400)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=300)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=500)
rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=500) |> plot()
r <- rast(ymax=-17.5,ymin=-56.5, xmax = -68,xmin=-76,ncol=100,nrow=500)
r
res(r) <- .01
r
values(r) <- 1:ncell(r)
plot(r)
40/60
r <- rast(ymax=-69.66667,ymin=-70.66667, xmax = -32.50,xmin=-33.50,ncol=100,nrow=500)
r
plot(r)
r <- rast(ymax=-69.66667,ymin=-70.66667, xmax = -32.50,xmin=-33.50)
r
r <- rast(ymax=-69.66667,ymin=-70.66667, xmax = -32.50,xmin=-33.50,ncol=10,nrow=10)
values(r) <- 1:100
plot(r)
text(r)
r <- rast(ymax=-69.66667,ymin=-70.66667, xmax = -32.50,xmin=-33.50,ncol=5,nrow=10)
values(r) <- 1:50
plot(r)
text(r)
rast(ncol=3,nrow=3,lyr=3)
rast(ncol=3,nrow=3,nlyr=3)
rast(nrow=3,ncol=3,nlyr=3)
r <- rast(nrow=3,ncol=3,nlyr=3)
values(r) <- c(rep(1,9),rep(2,9),rep(3,9))
plot(r)
values(r) <- c(1:9,10:18,19:27)
plot(r)
text(r)
plot(r[[1]]);text()
plot(r[[1]]);text(r)
plot(r)
text(r)
plot(r[[1]]);text(r)
plot(r[[2]]);text(r[[2]])
plot(r[[3]]);text(r[[3]])
?rast
r <- rast(ymax=-69.66667,ymin=-70.66667, xmax = -32.50,xmin=-33.50,ncol=5,nrow=10)
projet(r,crs="epsg:32719")
project(r,crs="epsg:32719")
project(r,"epsg:32719")
project(r,"epsg:32719") |> ext()
r
r <- rast(xmax=-69.66667,xmin=-70.66667, ymax = -32.50,ymin=-33.50,ncol=5,nrow=10)
project(r,"epsg:32719") |> ext()
343424-434203
90779/10
90779/100
350-450
100000/10
r <- rast(xmin =350000, xmax=450000,ymin=6400000,ymax=6500000,crs = "EPSG:32719")
r
r <- rast(xmin =350000, xmax=450000,ymin=6400000,ymax=6500000,crs = "EPSG:32719",
ncol=10,nrow=10)
r
values(r) <- 100:1
rast('/home/francisco/Documentos/IMSE1017/Taller4/santa_olga_2_2_transparent_mosaic_group1.tif')
im <- rast('/home/francisco/Documentos/IMSE1017/Taller4/santa_olga_2_2_transparent_mosaic_group1.tif')
im
plot(im)
plotRGB(im[[1:3]])
ext(im)
ext(im) |> st_bbox()
library(sf)
ext(im) |> st_bbox()
ext(im) |> st_bbox() |> st_as_sfc()
ext(im) |> st_bbox() |> st_as_sfc() |> st_buffer(-10000)
ext(im) |> st_bbox() |> st_as_sfc() |> st_buffer(-1000)
ext(im) |> st_bbox() |> st_as_sfc() |> st_buffer(-100)
ext(im) |> st_bbox() |> st_as_sfc() |> st_buffer(-1000)
ext(im) |> st_bbox() |> st_as_sfc() |> st_buffer(-100)
res(im)
res(im) <- 1
plot(im)
im <- rast('/home/francisco/Documentos/IMSE1017/Taller4/santa_olga_2_2_transparent_mosaic_group1.tif')
res(im)
aggregate(im,10)
im10 <- aggregate(im,10)
im10
plotRGB(im10[[1:3]])
writeRaster(im10[[1:3]],'~/Documentos/IMSE1017/Santa_Olga.tif')
so <- rast('~/Documentos/IMSE1017/Santa_Olga.tif')
so <- rast('~/Documentos/IMSE1017/Taller4/Santa_Olga.tif')
so
plot(so)
15*5
?coord_cartesian
library(ggplot2)
?coord_cartesian
?scale_y_continuous
install.packages('spData')
install.packages('spDataLarge')
install.packages("spDataLarge", repos = "https://geocompr.r-universe.dev")
library(spDataLarge)
nz_elev
library(spData)
nz_elev
system.file("raster/nz_elev.tif", package = "spDataLarge")
spDataLarge::nz_elev
spData::world
spData::world
spData::world
spDataLarge::nz_elev
nz_elev
library(spData)
library(spDataLarge)
library(basemaps)
library(terra)
set_defaults(map_service = "mapbox", map_type = "satellite",
map_token = 'pk.eyJ1IjoiZnJ6YW1icmEiLCJhIjoiY2tqdmw5Z3QxMDZyZjJydG54M2RobWMyeSJ9.rl8_KzhiKaV0wgsLL2Y1WQ')
nz <- spData::nz
nz_height <- spData::nz_height
world <- spData::world
#elev <- spData::elev
#grain <- spData::grain
nz_elev <- rast(system.file("raster/nz_elev.tif", package = "spDataLarge"))
urban_agglomerations <- spData::urban_agglomerations
library(tmap)
library(sf)
library(spData)
tm_shape(nz) +
tm_fill()
tm_shape(nz) +
tm_borders()
tm_shape(nz) +
tm_fill() +
tm_borders()
map_nz <- tm_shape(nz) +
tm_polygons()
class(map_nz)
library(spDataLarge)
map_nz1 <- map_nz +
tm_shape(nz_elev) +
tm_raster(alpha = 0.7)
nz_water <- st_union(nz)
nz_water <- st_buffer(nz_water,22200)
nz_water <- st_cast(nz_water,to = "LINESTRING")
map_nz2 = map_nz1 +
tm_shape(nz_water) +
tm_lines()
map_nz3 = map_nz2 +
tm_shape(nz_height) + tm_dots()
tmap_arrange(map_nz1, map_nz2, map_nz3)
tmap_arrange(map_nz1, map_nz2, map_nz3)
ma1 = tm_shape(nz) + tm_fill(col = "red")
ma2 = tm_shape(nz) + tm_fill(col = "red", alpha = 0.3)
ma3 = tm_shape(nz) + tm_borders(col = "blue")
ma4 = tm_shape(nz) + tm_borders(lwd = 3)
ma5 = tm_shape(nz) + tm_borders(lty = 2)
ma6 = tm_shape(nz) + tm_fill(col = "red", alpha = 0.3) +
tm_borders(col = "blue", lwd = 3, lty = 2)
tmap_arrange(ma1, ma2, ma3, ma4, ma5, ma6)
tm_shape(nz) + tm_fill(col = nz$Land_area) # no funciona
mcol1 <- tm_shape(nz) + tm_polygons(col = "Median_income")
breaks = c(0, 3, 4, 5) * 10000
mcol2 <- tm_shape(nz) + tm_polygons(col = "Median_income", breaks = breaks)
mcol3 <- tm_shape(nz) + tm_polygons(col = "Median_income", n = 10)
mcol4 <- tm_shape(nz) + tm_polygons(col = "Median_income", palette = "BuGn")
tmap_arrange(mcol1,mcol2,mcol3,mcol4,nrow = 1)
mcol5 <- tm_shape(nz) +
tm_polygons(col = "Median_income", style="pretty")
mcol6 <- tm_shape(nz) +
tm_polygons(col = "Median_income", style="equal")
mcol7 <- tm_shape(nz) +
tm_polygons(col = "Median_income", style="quantile")
mcol8 <- tm_shape(nz) +
tm_polygons(col = "Median_income", style="jenks")
mcol9 <- tm_shape(nz_elev) +
tm_raster(col = "elevation", style="cont")
mcol10 <- tm_shape(nz) +
tm_polygons(col = "Island", style="cat")
tmap_arrange(mcol5,mcol6,mcol7,mcol8,mcol9,mcol10,ncol=3)
mcol5
mcol5
mcol6
mcol7
mcol8
mcol9
plot(nz_elev)
tm_shape(nz_elev) +
tm_raster(col = "elevation", style="cont")
nz_elev
?tm_raster
tm_shape(nz_elev) + tm_raster(style = 'cont')
tm_shape(nz) +
tm_polygons(col = "Median_income", style="jenks")
nz_elev
nz_elev |> raster()
library(raster)
nz_elev |> raster() -> nz_elev
tm_shape(nz_elev) +
tm_raster(col = "elevation", style="cont")
mcol9
mcol9 <- tm_shape(nz_elev) +
tm_raster(col = "elevation", style="cont")
mcol9
names(nz_elev)
names(nz_elev |> rast())
2022-2017+1
install.packages('geodata')
library(geodata)
dem <- elevation_global(.5, path=tempdir())
dem
res(dem)
plot(dem)
?elevation_global
1/100
viridis::viridis(10)
terrain.colors(20)
citation('sf')
print(citation('sf'),bibtex = TRUE)
citation('terra')
citation('tmap')
files <- dir_ls('~/Descargas',regexp = 'shp$',recurse = TRUE)
library(geodata)
library(fs)
library(sf)
files <- dir_ls('~/Descargas',regexp = 'shp$',recurse = TRUE)
files
pol <- read_sf(files[2])
pol
st_geometry(pol)
class(pol)
class(st_geometry(pol))
st_geometry(pol)
pol
st_dimension(pol)
st_geometry_type(pol)
pol
pol |> distinct(region)
library(tidyverse)
pol |> distinct(REGION)
pol |> filter(REGION == 'RM')
pol |> filter(REGION == 'RM') |> st_geometry() |> plot()
pol |> filter(PROVINCIA == 'Santiago') |> st_geometry() |> plot()
pol |> filter(PROVINCIA == 'Santiago') -> lagos_santiago
lagos_santiago
lagos_santiago[,'AREA_KM2'] |> plot()
lagos_santiago[1]
lagos_santiago[1] |> st_geometry() |> plot()
lagos_santiago[1,] |> st_geometry() |> plot()
lagos_santiago[1,] |> st_geometry() |> st_simplify(d = 1000) |> plot()
?st_simplify
lagos_santiago[1,] |> st_geometry() |> st_simplify(dTolerance = 1000) |> plot()
lagos_santiago[1,] |> st_geometry() |> st_simplify(dTolerance = 100) |> plot()
lagos_santiago[1,] |> st_geometry() |> st_simplify(dTolerance = 10) |> plot()
lagos_santiago[1,] |> st_geometry() |> st_simplify(dTolerance = 30) |> plot()
files
pol <- read_sf(files[1])
plot(pol$geometry)
pol
pol |> filter(NOM_REG == 'COQUIMBO')
POL |> distinct(COMUNA)
pol |> distinct(COMUNA)
pol |> distinct(NOM_COM)
pol |> distinct(NOM_COM) |> sample(1)
sample(1,124)
sample(124,1)
pol |> distinct(NOM_COM) |> slice(102)
pol |> filter(NOM_COM = ROMERAL)
pol |> filter(NOM_COM = "ROMERAL")
pol |> filter(NOM_COM == "ROMERAL")
pol |> filter(NOM_COM == "ROMERAL") |> plot()
pol |> filter(NOM_COM == "ROMERAL") |> st_geometry() |>  plot()
pol |> filter(NOM_COM == "ROMERAL") |> st_geometry() |> st_buffer(250) |>  plot()
pol |> filter(NOM_COM == "ROMERAL") |> st_geometry() |> st_buffer(550) |>  plot()
pol$NOMBRE_APR
pol
2*sqrt(3)
library(geodata)
library(fs)
library(sf)
files <- dir_ls('~/Descargas',regexp = 'shp$',recurse = TRUE)
pol <- read_sf(files[1])
files
pol <- read_sf(files[1])
pol
pol$NOM_COM |> unique()
rast(3,3) ->r
library(terra)
rast(3,3) ->r
rast(ncols=3,nrows=3) ->r
r
values(r) <- letters[1:9]
plot(r)
text(t)
text(r)
